<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MU Map Monster Viewer ‚Äî Modular</title>
  <link rel="stylesheet" href="assets/style.css" />
</head>
<body>
  <header>
    <h1>MU Map Monster Viewer ‚Äî Modular</h1>
    <div class="muted">T·ª± ƒë·ªçc <code>map/maps.json</code>, <code>monster/Monster.txt</code>, <code>monster/MonsterSetBase.txt</code>.</div>
  </header>

  <main>
    <!-- C·ªòT TR√ÅI: C·∫•u h√¨nh + Ch·ªçn map + Th·ªëng k√™ + ƒêi·ªÅu khi·ªÉn (·ªü ƒë√°y) -->
    <section class="card card-left">
      <h2>C·∫•u h√¨nh &amp; Ghi ch√∫</h2>
      <div class="content content-left">
        <div class="legend" style="margin-bottom:10px">
          <span class="chip"><span class="dot danger"></span> Monster (single)</span>
          <span class="chip"><span class="dot npc"></span> NPC (single)</span>
          <span class="chip"><span class="box spot"></span> Spot / V√πng</span>
        </div>

        <!-- Ch·ªçn map -->
        <div class="stack gap-8">
          <div class="row gap-8">
            <select id="mapSelect" disabled></select>
            <button id="reloadAll" class="primary">Reload</button>
          </div>

          <!-- Th·ªëng k√™ -->
          <div id="mapStats" class="stats-panel">
            <div class="muted">Ch·ªçn map ƒë·ªÉ xem th·ªëng k√™.</div>
          </div>
        </div>
      </div>
      <!-- ‚úÖ Panel th√™m qu√°i (d∆∞·ªõi stats, tr√™n scale) -->
      <div id="monsterAddPanel" class="panel" style="margin-top:12px">
        <!-- Form th√™m qu√°i s·∫Ω ƒë∆∞·ª£c inject ·ªü ƒë√¢y -->
      </div>

      <!-- ‚úÖ L∆∞u file -->
      <div class="stack gap-8" style="margin-top:12px">
        <button id="saveMonsterBtn">üíæ L∆∞u MonsterSetBase.txt</button>
      </div>
      
      <!-- ‚úÖ ƒêi·ªÅu khi·ªÉn c·ªë ƒë·ªãnh ·ªü ƒë√°y th·∫ª (kh√¥ng c√≤n n·ªïi b√™n ph·∫£i) -->
      <div class="left-controls">
        <div class="fc-row">
          <label for="scale" class="muted">Scale</label>
          <button id="scaleMinus" title="Gi·∫£m">‚àí</button>
          <input id="scale" type="range" min="0.25" max="1" step="0.05" value="1" />
          <button id="scalePlus" title="TƒÉng">+</button>
          <span id="scaleVal" class="muted w48 right">100%</span>
        </div>
        <div class="fc-row">
          <button id="calibToggle" title="B·∫≠t/t·∫Øt calibrate">Calibrate</button>
          <button id="calibReset" title="Xo√° offset map hi·ªán t·∫°i">Reset</button>
          <span id="coordReadout" class="coords">(x, y) ‚Äî</span>
        </div>
      </div>
    </section>

    <!-- C·ªòT PH·∫¢I: Danh s√°ch + Canvas -->
    <section class="card" style="grid-column:2/3;">
      <div class="content content-grid">
        <div>
          <h3 class="muted" style="margin-top:0">Danh s√°ch qu√°i (map ƒëang ch·ªçn)</h3>
          <div id="mobList" class="scroll">
            <div class="muted" style="padding:8px">Ch∆∞a c√≥ d·ªØ li·ªáu.</div>
          </div>

          <!-- Info Panel -->
          <div id="infoPanel" class="info-panel" style="margin-top:8px">
            <div class="muted">Ch·ªçn 1 spot ho·∫∑c single ƒë·ªÉ xem chi ti·∫øt.</div>
          </div>
        </div>

        <div>
          <canvas id="view" width="1024" height="1024"></canvas>
        </div>
      </div>
    </section>
  </main>

  <script type="module" src="./app/main.js"></script>
</body>
</html>